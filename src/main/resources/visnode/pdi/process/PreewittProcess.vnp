{"output":{"input":[],"hashCode":1036022327,"position":{"x":764,"y":105},"connections":[{"leftNode":1504272100,"rightAttribute":"value","leftAttribute":"value"}]},"nodes":[{"input":[{"parameterType":"visnode.pdi.process.ImageInput","parameterName":"file","value":{"type":"visnode.commons.MultiFileInput","data":{"file":["/home/jonatabecker/Desktop/Lenna.png"],"index":0}}}],"hashCode":847872268,"position":{"x":50,"y":50},"processType":"visnode.pdi.process.InputProcess","connections":[]},{"input":[{"parameterType":"visnode.commons.ScriptValue","parameterName":"script","value":{"value":"function process(image) {\n    var resultImage \u003d ImageFactory.buildEmptyImage(image);\n    convolution(image, resultImage);\n    return resultImage;\n}\n\nvar xMask \u003d [[1, 0, -1], [1, 0, -1], [1, 0, -1]];\nvar yMask \u003d [[1, 1, 1], [0, 0, 0], [-1, -1, -1]];\n\nfunction computePixel(image, channel, x, y) {\n    var gradientX \u003d 0;\n    var gradientY \u003d 0;\n    for (var lx \u003d 0; lx \u003c 3; lx++) {\n        for (var ly \u003d 0; ly \u003c 3; ly++) {\n            var value \u003d image.get(channel, x + lx - 1, y + ly - 1);\n            gradientX +\u003d value * xMask[lx][ly];\n            gradientY +\u003d value * yMask[lx][ly];\n        }\n    }\n    var value \u003d Math.floor(Math.sqrt(Math.pow(gradientX, 2) + Math.pow(gradientY, 2)));\n    if (value \u003e image.getPixelValueRange().getHigher()) {\n        return image.getPixelValueRange().getHigher();\n    }\n    return value;\n}\n\nfunction convolution(image, resultImage) {\n    for (var channel \u003d 0; channel \u003c image.getChannelCount(); channel++) {\n        for (var x \u003d 1; x \u003c image.getWidth() - 1; x++) {\n            for (var y \u003d 1; y \u003c image.getHeight() - 1; y++) {\n                var newValue \u003d computePixel(image, channel, x, y);\n                resultImage.set(channel, x, y, newValue);\n            }\n        }\n    }\n}\n"}}],"hashCode":1504272100,"position":{"x":386,"y":158},"processType":"visnode.pdi.process.ScriptProcess","connections":[{"leftNode":847872268,"rightAttribute":"input","leftAttribute":"image"}]}]}